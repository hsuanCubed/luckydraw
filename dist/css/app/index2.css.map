{"version":3,"sources":["webpack:///./app/components/common/editListModal.vue","webpack:///./app/components/common/luckyModal.vue","webpack:///./app/components/common/resultModal.vue","webpack:///./app/components/common/settingModal.vue"],"names":[],"mappings":";AAgGA;IACA;AACA;;;ACSA;IACA;AACA;;;AC+EA;IACA;IACA;AACA;;;ACYA;IACA;IACA;IACA;IACA;IACA;AACA","file":"../css/app/index2.css","sourcesContent":["<template>\r\n    <div class=\"modal\" tabindex=\"-1\" role=\"dialog\">\r\n        <div class=\"modal-dialog\" role=\"document\">\r\n            <div class=\"modal-content\">\r\n                <div class=\"modal-header\">\r\n                    <h5 class=\"modal-title\">\r\n                        <i class=\"fas fa-user-edit\"></i>\r\n                        編輯名單\r\n                    </h5>\r\n                    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                        <span aria-hidden=\"true\">&times;</span>\r\n                    </button>\r\n                </div>\r\n                <div class=\"modal-body\">\r\n                    <div class=\"form-group\">\r\n                        <textarea class=\"form-control\" v-model=\"shortlistTextarea\" placeholder=\"請一行一行條列輸入候選名單\"></textarea>\r\n                    </div>\r\n                </div>\r\n                <div class=\"modal-footer\">\r\n                    <div class=\"col-6 text-left\">\r\n                        <button type=\"button\" class=\"btn btn-warning\" v-on:click=\"randomSort\">打亂排序</button>\r\n                    </div>\r\n                    <div class=\"col-6 text-right\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">取消</button>\r\n                        <button type=\"button\" class=\"btn btn-primary\" v-on:click=\"save\">儲存</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport Vue from 'vue';\r\nimport { mapActions, mapGetters } from 'vuex';\r\n\r\nimport {mixpanel} from 'lib/common/util';\r\n\r\nlet targetDom = null;\r\n\r\nexport default {\r\n    data: function() {\r\n        return {\r\n            shortlistTextarea: \"\",\r\n        }\r\n    },\r\n    methods: {\r\n        save: function(){\r\n            const that = this;\r\n            const params = {\r\n                shortlistInput: that.shortlistTextarea\r\n            };\r\n\r\n            that.$store.dispatch(\"setShortListInput\", params);\r\n            targetDom.modal(\"hide\");\r\n\r\n            mixpanel.track(\"save shortlist\", params);\r\n        },\r\n        randomSort: function(){\r\n            const that = this;\r\n            that.$store.dispatch(\"setShortlistRandomSort\");\r\n            const params = {\r\n                shortlist_sort: that.shortlist_sort,\r\n            };\r\n            mixpanel.track(\"random sort shortlist\", params);\r\n        }\r\n    },\r\n    watch: {\r\n        triggerOpenEditList: function(){\r\n            const that = this;\r\n            targetDom.modal(\"show\");\r\n        },\r\n    },\r\n    computed: {\r\n        ...mapGetters([\r\n            \"triggerOpenEditList\",\r\n            \"shortlistInput\",\r\n            \"shortlist_sort\",\r\n        ])\r\n    },\r\n    mounted() {\r\n        const that = this;\r\n        targetDom = $(that.$el);\r\n        targetDom.bind(\"shown.bs.modal\", function(){\r\n            that.shortlistTextarea = that.shortlistInput;\r\n            mixpanel.track(\"open shortlist\");\r\n        });\r\n    },\r\n    props: {\r\n\r\n    },\r\n    components: {\r\n\r\n    }\r\n};\r\n</script>\r\n<style scope>\r\ntextarea{\r\n    min-height: calc(100vh - 300px);\r\n}\r\n</style>","<template>\r\n    <div class=\"modal lucky-modal\" tabindex=\"-1\" role=\"dialog\" data-backdrop=\"static\" data-keyboard=\"false\">\r\n        <div class=\"modal-dialog\" role=\"document\">\r\n            <div class=\"modal-content\">\r\n                <div class=\"modal-header\">\r\n                    <h5 class=\"modal-title\">\r\n                        <i class=\"fas fa-vote-yea\"></i>\r\n                        恭喜中獎\r\n                    </h5>\r\n                </div>\r\n                <div class=\"modal-body\">\r\n                    <div class=\"text-center\">\r\n                        <h4>恭喜中獎</h4>\r\n                        <div v-if=\"focusShortlist\">\r\n                            <candidate-box v-bind:candidate-info=\"focusShortlist\"></candidate-box>\r\n                        </div>\r\n                        中獎獎項\r\n                        <div class=\"form-group\">\r\n                            <div class=\"form-control text-center\" v-html=\"award\"></div>\r\n                            <!-- <input type=\"text\" class=\"form-control text-center\" v-model=\"award\" placeholder=\"輸入獎項名稱\"> -->\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"modal-footer\">\r\n                    <div class=\"col-6 text-left\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" v-on:click=\"cancel\" data-dismiss=\"modal\">取消</button>\r\n                    </div>\r\n                    <div class=\"col-6 text-right\">\r\n                        <button type=\"button\" class=\"btn btn-primary\" v-on:click=\"save\">儲存</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport Vue from 'vue';\r\nimport { mapActions, mapGetters } from 'vuex';\r\n\r\nimport candidateBox from './candidateBox';\r\nimport {mixpanel} from 'lib/common/util';\r\n\r\nlet targetDom = null;\r\n\r\nexport default {\r\n    data: function() {\r\n        return {\r\n            award: \"\",\r\n        }\r\n    },\r\n    methods: {\r\n        save: function() {\r\n            const that = this;\r\n            const params = {\r\n                award: that.award,\r\n                winner: that.focusShortlist.name,\r\n            };\r\n            that.$store.dispatch(\"setFocusSN2LuckySN\", params);\r\n            targetDom.modal(\"hide\");\r\n\r\n            mixpanel.track(\"confirm winner\", params);\r\n        },\r\n        cancel: function(){\r\n            const that = this;\r\n            const params = {\r\n                award: that.award,\r\n                winner: that.focusShortlist.name,\r\n            };\r\n            mixpanel.track(\"cancel winner\", params);\r\n        },\r\n        ...mapActions({})\r\n    },\r\n    watch: {\r\n        triggerOpenLucky: function() {\r\n            const that = this;\r\n            targetDom.modal(\"show\");\r\n        },\r\n    },\r\n    computed: {\r\n        ...mapGetters([\r\n            \"triggerOpenLucky\",\r\n            \"focusShortlist\",\r\n            \"focusSN\",\r\n            \"focusPrizeSN\",\r\n            \"prizeList\",\r\n        ])\r\n    },\r\n    mounted() {\r\n        const that = this;\r\n        targetDom = $(that.$el);\r\n        targetDom.bind(\"shown.bs.modal\", function() {\r\n            that.award = that.prizeList[ that.focusPrizeSN ];\r\n            const params = {\r\n                award: that.award,\r\n                winner: that.focusShortlist.name,\r\n            };\r\n            mixpanel.track(\"open lucky\", params);\r\n        });\r\n    },\r\n    props: {},\r\n    components: {\r\n        candidateBox,\r\n    }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.candidate-wrapper{\r\n    margin: 10px auto; /* Match the margin style */\r\n}\r\n</style>","<template>\r\n    <div class=\"modal result-modal\" tabindex=\"-1\" role=\"dialog\">\r\n        <div class=\"modal-dialog modal-lg\" role=\"document\">\r\n            <div class=\"modal-content\">\r\n                <div class=\"modal-header\">\r\n                    <h5 class=\"modal-title\">\r\n                        <i class=\"fas fa-vote-yea\"></i>\r\n                        中獎名單\r\n                    </h5>\r\n                    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                        <span aria-hidden=\"true\">&times;</span>\r\n                    </button>\r\n                </div>\r\n                <div class=\"modal-body\">\r\n                    <table class=\"table\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th style=\"width: 15%;\">#</th>\r\n                                <th style=\"width: 30%;\">姓名</th>\r\n                                <th>獎項</th>\r\n                                <th style=\"width: 20%;\">功能</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            <template v-for=\"(shortlist, shortlistIndex) in resultList\">\r\n                                <template v-if=\"shortlist.edit\">\r\n                                    <tr :key=\"shortlist.sn\" v-if=\"editsortList != null\">\r\n                                        <th scope=\"row\">\r\n                                            <select class=\"form-control\" v-model=\"editsortList.lucky\">\r\n                                                <option v-for=\"(luckyName, luckyValue) in luckyOption\" :value=\"luckyValue\">{{luckyName}}</option>\r\n                                            </select>\r\n                                        </th>\r\n                                        <td>{{editsortList.name}}</td>\r\n                                        <td >\r\n                                            <input class=\"form-control\" v-model=\"editsortList.award\">\r\n                                        </td>\r\n                                        <td>\r\n                                            <button class=\"btn btn-info\" v-on:click=\"save()\">\r\n                                                <i class=\"fas fa-save\"></i>\r\n                                            </button>\r\n                                            <button class=\"btn btn-warning\" v-on:click=\"openEdit(shortlistIndex, false)\">\r\n                                                <i class=\"fas fa-times\"></i>\r\n                                            </button>\r\n                                        </td>\r\n                                    </tr>\r\n                                </template>\r\n                                <template v-else>\r\n                                    <tr :key=\"shortlist.sn\">\r\n                                        <th scope=\"row\">\r\n                                            {{luckyOption[shortlist.lucky]}}\r\n                                        </th>\r\n                                        <td>{{shortlist.name}}</td>\r\n                                        <td >{{shortlist.award || \"--\"}}</td>\r\n                                        <td>\r\n                                            <button class=\"btn btn-success\" v-on:click=\"openEdit(shortlistIndex, true)\">\r\n                                                <i class=\"fas fa-edit\"></i>\r\n                                            </button>\r\n                                        </td>\r\n                                    </tr>\r\n                                </template>\r\n\r\n                            </template>\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n                <div class=\"modal-footer\">\r\n                    <div class=\"col-6 text-left\">\r\n                    </div>\r\n                    <div class=\"col-6 text-right\">\r\n                        <button type=\"button\" class=\"btn btn-primary\" v-on:click=\"download\">下載</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport Vue from 'vue';\r\nimport { mapActions, mapGetters } from 'vuex';\r\nimport {mixpanel} from 'lib/common/util';\r\n\r\nlet targetDom = null;\r\n\r\n\r\nexport default {\r\n    data: function() {\r\n        return {\r\n            resultList: [],\r\n            luckyOption: {\r\n                0: \"未中獎\",\r\n                1: \"中獎\",\r\n            },\r\n            editsortList: null,\r\n        }\r\n    },\r\n    methods: {\r\n        download: function(){\r\n            const that = this;\r\n            let resultList = JSON.parse(JSON.stringify(that.resultList));\r\n\r\n            let cvs = \"姓名,職位,獎項\\n\" + resultList.map(function(Obj){\r\n                let data = [];\r\n                data.push( Obj.name );\r\n                data.push( Obj.pos );\r\n                data.push( Obj.award || \"--\" );\r\n                return data.join(\",\");\r\n            }).join(\"\\r\\n\");\r\n\r\n            let csvContent = \"data:text/csv;charset=utf-8,\" + cvs;\r\n            let encodedUri = encodeURI(csvContent);\r\n\r\n            let link = document.createElement(\"a\");\r\n            link.style.display = \"none\";\r\n            link.setAttribute(\"href\", encodedUri);\r\n            link.setAttribute(\"download\", that.config.webTitle + \"中獎名單.csv\");\r\n            document.body.appendChild(link); // Required for FF\r\n            link.click();\r\n\r\n            mixpanel.track(\"download result\", cvs);\r\n        },\r\n        openEdit: function(index, editFlag){\r\n            const that = this;\r\n            let resultList = JSON.parse(JSON.stringify(that.resultList));\r\n\r\n            resultList = resultList.map(function(data){\r\n                data.edit = false;\r\n                return data;\r\n            });\r\n            resultList[index].edit = editFlag;\r\n\r\n            if (editFlag) {\r\n                that.editsortList = JSON.parse(JSON.stringify(resultList[index]));\r\n            }\r\n\r\n            that.resultList = resultList;\r\n\r\n            mixpanel.track(\"want edit\", { editInfo: that.editsortList});\r\n        },\r\n        save: function(){\r\n            const that = this;\r\n            let editsortList = JSON.parse(JSON.stringify(that.editsortList));\r\n            const params = {\r\n                data: editsortList,\r\n            };\r\n            that.$store.dispatch(\"editShortList\", params);\r\n\r\n            mixpanel.track(\"save edit\", params);\r\n        },\r\n    },\r\n    watch: {\r\n        triggerOpenResult: function() {\r\n            const that = this;\r\n            targetDom.modal(\"show\");\r\n        },\r\n        shortlistByLuckySN: function(){\r\n            const that = this;\r\n            let shortlistByLuckySN = JSON.parse(JSON.stringify(that.shortlistByLuckySN));\r\n            that.resultList = shortlistByLuckySN.map(function(data){\r\n                data.lucky = that.luckySN.includes(data.sn)?1:0;\r\n                data.edit = false;\r\n                return data;\r\n            });\r\n        },\r\n    },\r\n    computed: {\r\n        ...mapGetters([\r\n            \"triggerOpenResult\",\r\n            \"shortlistByLuckySN\",\r\n            \"luckySN\",\r\n            \"config\",\r\n        ])\r\n    },\r\n    mounted() {\r\n        const that = this;\r\n        targetDom = $(that.$el);\r\n        targetDom.bind(\"shown.bs.modal\", function() {\r\n            mixpanel.track(\"open result\");\r\n        });\r\n    },\r\n    props: {\r\n\r\n    },\r\n    components: {\r\n\r\n    }\r\n};\r\n</script>\r\n<style scoped>\r\n.modal-body{\r\n    height: calc( 100vh - 200px);\r\n    overflow: auto;\r\n}\r\n</style>","<template>\r\n    <div class=\"modal\" tabindex=\"-1\" role=\"dialog\" data-backdrop=\"static\" data-keyboard=\"false\">\r\n        <div class=\"modal-dialog\" role=\"document\">\r\n            <div class=\"modal-content\">\r\n                <div class=\"modal-header\">\r\n                    <h5 class=\"modal-title\">\r\n                        <i class=\"fas fa-cog\"></i>\r\n                        設定\r\n                    </h5>\r\n                    <!-- <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                        <span aria-hidden=\"true\">&times;</span>\r\n                    </button> -->\r\n                </div>\r\n                <div class=\"modal-body\">\r\n                    <form>\r\n                        <div class=\"form-group\">\r\n                            <label for=\"exampleInputEmail1\">網站標題</label>\r\n                            <input type=\"text\" class=\"form-control\"   v-model=\"input.webTitle\">\r\n                        </div>\r\n                        <div class=\"form-group\">\r\n                            <label for=\"exampleInputEmail1\" style=\"display: flex;\">\r\n                                Header 顏色\r\n                                <span :style=\"{ background: input.headerColor, width: '20px', height: '20px', display: 'inline-block', border: '1px solid #999' }\"></span>\r\n                            </label>\r\n                            <input type=\"text\" class=\"form-control\"   v-model=\"input.headerColor\">\r\n                        </div>\r\n                        <div class=\"form-group\">\r\n                            <label for=\"exampleInputEmail1\" style=\"display: flex;\">\r\n                                背景圖片\r\n                            </label>\r\n                            <input type=\"text\" class=\"form-control\"   v-model=\"input.backgroundImg\">\r\n                        </div>\r\n                        <div class=\"form-group\">\r\n                            <label for=\"exampleInputEmail1\" style=\"display: flex;\">\r\n                                背景透明度\r\n                            </label>\r\n                            <input type=\"number\" class=\"form-control\" v-model.number=\"input.backgroundOpacity\" min=\"0\" max=\"1\" step=\"0.1\">\r\n                        </div>\r\n                        <hr />\r\n                        <div class=\"form-group\">\r\n                            <label for=\"exampleInputEmail1\">區塊寬度 [{{input.boxWidth}} px]</label>\r\n                            <input type=\"range\" class=\"form-control\"  min=\"100\" max=\"200\" v-model=\"input.boxWidth\">\r\n                        </div>\r\n                        <div class=\"form-group\">\r\n                            <label for=\"exampleInputEmail1\">區塊高度 [{{input.boxHeight}} px]</label>\r\n                            <input type=\"range\" class=\"form-control\" min=\"50\" max=\"100\" v-model=\"input.boxHeight\">\r\n                        </div>\r\n                        <div class=\"form-group\">\r\n                            <label for=\"exampleInputEmail1\">標題大小 [{{input.titleSize}} px]</label>\r\n                            <input type=\"range\" class=\"form-control\" min=\"15\" max=\"25\" v-model=\"input.titleSize\">\r\n                        </div>\r\n                        <div class=\"form-group\">\r\n                            <label for=\"exampleInputEmail1\">副標題大小 [{{input.subtitleSize}} px]</label>\r\n                            <input type=\"range\" class=\"form-control\" min=\"15\" max=\"25\" v-model=\"input.subtitleSize\">\r\n                        </div>\r\n                        <div class=\"form-group\">\r\n                            <label for=\"exampleInputEmail1\">區塊預設顏色 <div class=\"show-blcok\" v-bind:style=\"{background: input.defaultColor}\"></div></label>\r\n                            <input type=\"text\" class=\"form-control\"   v-model=\"input.defaultColor\">\r\n                        </div>\r\n                        <div class=\"form-group\">\r\n                            <label for=\"exampleInputEmail1\">區塊選取顏色 <div class=\"show-blcok\" v-bind:style=\"{background: input.focusColor}\"></div></label>\r\n                            <input type=\"text\" class=\"form-control\"   v-model=\"input.focusColor\">\r\n                        </div>\r\n                        <div class=\"form-group\">\r\n                            <label for=\"exampleInputEmail1\">區塊完成顏色 <div class=\"show-blcok\" v-bind:style=\"{background: input.doneColor}\"></div></label>\r\n                            <input type=\"text\" class=\"form-control\"   v-model=\"input.doneColor\">\r\n                        </div>\r\n                        <hr />\r\n                        <div class=\"form-group\">\r\n                            <label for=\"exampleInputEmail1\">亂數跳動次數 [{{input.defaultRunTime}} 次]</label>\r\n                            <input type=\"range\" class=\"form-control\" min=\"10\" max=\"100\" v-model=\"input.defaultRunTime\">\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n                <div class=\"modal-footer\">\r\n                    <div class=\"col-6 text-left\">\r\n                        <button type=\"button\" class=\"btn btn-danger\" v-on:click=\"clear\">清除所有資料</button>\r\n                    </div>\r\n                    <div class=\"col-6 text-right\">\r\n                        <button type=\"button\" class=\"btn btn-default\" v-on:click=\"cancel\">回復</button>\r\n                        <button type=\"button\" class=\"btn btn-primary\" v-on:click=\"save\">儲存</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport Vue from 'vue';\r\nimport { mapActions, mapGetters } from 'vuex';\r\n\r\nimport {mixpanel} from 'lib/common/util';\r\n\r\nlet targetDom = null;\r\n\r\nlet mixpanelTrackerTimer = null;\r\n\r\nexport default {\r\n    data: function() {\r\n        return {\r\n            input: {\r\n                webTitle: \"\",\r\n                headerColor: '#343a40',\r\n                backgroundImg: '',\r\n                backgroundOpacity: 0.5,\r\n                boxWidth: 0,\r\n                boxHeight: 0,\r\n                titleSize: 0,\r\n                subtitleSize: 0,\r\n                defaultColor: \"#FFF\",\r\n                focusColor: \"#FFC\",\r\n                doneColor: \"#FCC\",\r\n                defaultRunTime:0,\r\n            },\r\n            orgInput: {\r\n                webTitle: \"\",\r\n                headerColor: '#343a40',\r\n                backgroundImg: '',\r\n                backgroundOpacity: 0.5,\r\n                boxWidth: 0,\r\n                boxHeight: 0,\r\n                titleSize: 0,\r\n                subtitleSize: 0,\r\n                defaultColor: \"#FFF\",\r\n                focusColor: \"#FFC\",\r\n                doneColor: \"#FCC\",\r\n                defaultRunTime:0,\r\n            },\r\n        }\r\n    },\r\n    methods: {\r\n        save: function() {\r\n            const that = this;\r\n            const params = {\r\n                config: that.input,\r\n            };\r\n            mixpanel.track(\"save setting\", params);\r\n            targetDom.modal(\"hide\");\r\n        },\r\n        cancel: function(){\r\n            const that = this;\r\n            const params = {\r\n                config: that.orgInput,\r\n            };\r\n            that.$store.dispatch(\"setConfig\", params);\r\n            mixpanel.track(\"cancel setting\", params);\r\n            targetDom.modal(\"hide\");\r\n        },\r\n        clear: function(){\r\n            const that = this;\r\n            if (confirm(\"您確定要清除所有的資料嗎？\")) {\r\n                that.$store.dispatch(\"clearAllData\");\r\n                mixpanel.track(\"clear all data\");\r\n                targetDom.modal(\"hide\");\r\n            }\r\n        },\r\n    },\r\n    watch: {\r\n        input: {\r\n            deep: true,\r\n            handler: function (val, oldVal) {\r\n                const that = this;\r\n                const params = {\r\n                    config: that.input,\r\n                };\r\n                that.$store.dispatch(\"setConfig\", params);\r\n\r\n                clearTimeout(mixpanelTrackerTimer);\r\n                mixpanelTrackerTimer = setTimeout(function(){\r\n                    mixpanel.track(\"try setting\", params);\r\n                },2000);\r\n            },\r\n        },\r\n        triggerOpenSetting: function() {\r\n            const that = this;\r\n            targetDom.modal(\"show\");\r\n        },\r\n    },\r\n    computed: {\r\n        ...mapGetters([\r\n            \"triggerOpenSetting\",\r\n            \"config\",\r\n        ])\r\n    },\r\n    mounted() {\r\n        const that = this;\r\n        targetDom = $(that.$el);\r\n        targetDom.bind(\"shown.bs.modal\", function() {\r\n            let config = JSON.parse(JSON.stringify(that.config));\r\n            that.input = { ...that.input, ...config};\r\n            that.orgInput = { ...that.orgInput, ...config};\r\n            mixpanel.track(\"open setting\");\r\n        });\r\n    },\r\n    props: {\r\n\r\n    },\r\n    components: {\r\n\r\n    }\r\n};\r\n</script>\r\n<style scoped>\r\n.show-blcok{\r\n    display: inline-block;\r\n    border: 1px solid #ccc;\r\n    border-radius: 4px;\r\n    width: 20px;\r\n    height: 20px;\r\n}\r\n</style>"],"sourceRoot":""}