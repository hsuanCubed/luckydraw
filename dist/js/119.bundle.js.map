{"version":3,"file":"119.bundle.js?v=52ab5fb97953b963c8f0","mappings":"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","sources":["webpack:///./components/LuckyBox/main.vue","webpack:///components/LuckyBox/main.vue","webpack:///./components/LuckyBox/main.vue?91f2","webpack:///./components/LuckyBox/main.vue?6824"],"sourcesContent":["var render = function render() {\n  var _vm = this,\n    _c = _vm._self._c\n  return _c(\n    \"div\",\n    {\n      ref: \"box\",\n      staticClass: \"modal lucky-modal\",\n      attrs: {\n        id: \"LuckyBox\",\n        tabindex: \"-1\",\n        role: \"dialog\",\n        \"data-backdrop\": \"static\",\n        \"data-keyboard\": \"false\",\n      },\n    },\n    [\n      _c(\"div\", { staticClass: \"modal-dialog\", attrs: { role: \"document\" } }, [\n        _c(\"div\", { staticClass: \"modal-content\" }, [\n          _vm._m(0),\n          _vm._v(\" \"),\n          _c(\"div\", { staticClass: \"modal-body\" }, [\n            _c(\n              \"div\",\n              { staticClass: \"text-center p-4 lucky-info\" },\n              [\n                _c(\"h4\", [\n                  _vm._v(\n                    \"恭喜中獎 (共 \" +\n                      _vm._s(_vm.winnerCandidateList.length) +\n                      \" 人)\"\n                  ),\n                ]),\n                _vm._v(\" \"),\n                _vm.winnerCandidateList.length > 0\n                  ? [\n                      _c(\n                        \"div\",\n                        {\n                          staticClass:\n                            \"winner-list-container d-flex flex-wrap justify-content-center\",\n                        },\n                        _vm._l(\n                          _vm.winnerCandidateList,\n                          function (winnerInfo, index) {\n                            return _c(\"candidate-box\", {\n                              key: winnerInfo.sn,\n                              attrs: {\n                                \"candidate-index\": index,\n                                \"candidate-info\": winnerInfo,\n                              },\n                            })\n                          }\n                        ),\n                        1\n                      ),\n                    ]\n                  : [\n                      _vm._v(\n                        \"\\n                        無法對應\\n                    \"\n                      ),\n                    ],\n                _vm._v(\" \"),\n                _c(\"h5\", { staticClass: \"mt-4\" }, [\n                  _vm._v(\n                    \"\\n                        中獎獎項\\n                    \"\n                  ),\n                ]),\n                _vm._v(\" \"),\n                _c(\"div\", { staticClass: \"form-group\" }, [\n                  _c(\"div\", {\n                    staticClass: \"form-control text-center\",\n                    domProps: { textContent: _vm._s(_vm.focusPrizeInfo.title) },\n                  }),\n                ]),\n              ],\n              2\n            ),\n          ]),\n          _vm._v(\" \"),\n          _c(\"div\", { staticClass: \"modal-footer\" }, [\n            _c(\"div\", { staticClass: \"col-6 text-left\" }, [\n              _c(\n                \"button\",\n                {\n                  staticClass: \"btn btn-secondary cancel\",\n                  attrs: { type: \"button\", \"data-dismiss\": \"modal\" },\n                  on: { click: _vm.cancel },\n                },\n                [_vm._v(\"\\n                        取消\\n                    \")]\n              ),\n            ]),\n            _vm._v(\" \"),\n            _c(\"div\", { staticClass: \"col-6 text-right\" }, [\n              _c(\n                \"button\",\n                {\n                  staticClass: \"btn btn-primary save\",\n                  attrs: { type: \"button\" },\n                  on: { click: _vm.save },\n                },\n                [_vm._v(\"\\n                        確定\\n                    \")]\n              ),\n            ]),\n          ]),\n        ]),\n      ]),\n    ]\n  )\n}\nvar staticRenderFns = [\n  function () {\n    var _vm = this,\n      _c = _vm._self._c\n    return _c(\"div\", { staticClass: \"modal-header\" }, [\n      _c(\"h5\", { staticClass: \"modal-title\" }, [\n        _c(\"i\", { staticClass: \"fas fa-vote-yea\" }),\n        _vm._v(\"\\n                    恭喜中獎\\n                \"),\n      ]),\n    ])\n  },\n]\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<template>\r\n    <div id=\"LuckyBox\" ref=\"box\" class=\"modal lucky-modal\" tabindex=\"-1\" role=\"dialog\" data-backdrop=\"static\"\r\n        data-keyboard=\"false\">\r\n        <div class=\"modal-dialog\" role=\"document\">\r\n            <div class=\"modal-content\">\r\n                <div class=\"modal-header\">\r\n                    <h5 class=\"modal-title\">\r\n                        <i class=\"fas fa-vote-yea\"></i>\r\n                        恭喜中獎\r\n                    </h5>\r\n                </div>\r\n                <div class=\"modal-body\">\r\n                    <div class=\"text-center p-4 lucky-info\">\r\n                        <h4>恭喜中獎 (共 {{ winnerCandidateList.length }} 人)</h4>\r\n                        <template v-if=\"winnerCandidateList.length > 0\">\r\n                            <div class=\"winner-list-container d-flex flex-wrap justify-content-center\">\r\n                                <candidate-box v-for=\"(winnerInfo, index) in winnerCandidateList\" :key=\"winnerInfo.sn\"\r\n                                    :candidate-index=\"index\" :candidate-info=\"winnerInfo\"></candidate-box>\r\n                            </div>\r\n                        </template>\r\n                        <template v-else>\r\n                            無法對應\r\n                        </template>\r\n\r\n                        <h5 class=\"mt-4\">\r\n                            中獎獎項\r\n                        </h5>\r\n                        <div class=\"form-group\">\r\n                            <div class=\"form-control text-center\" v-text=\"focusPrizeInfo.title\"></div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"modal-footer\">\r\n                    <div class=\"col-6 text-left\">\r\n                        <button type=\"button\" class=\"btn btn-secondary cancel\" data-dismiss=\"modal\" @click=\"cancel\">\r\n                            取消\r\n                        </button>\r\n                    </div>\r\n                    <div class=\"col-6 text-right\">\r\n                        <button type=\"button\" class=\"btn btn-primary save\" @click=\"save\">\r\n                            確定\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport { trackJS } from 'lib/common/util';\r\nimport { mapActions, mapMutations, mapGetters } from 'vuex';\r\n\r\n// import $ from 'jquery';\r\n// import 'bootstrap';\r\n\r\n// import 'app';\r\n// import { string, jsVars, popup, trackJS, localStorage, ppPanel } from 'lib/common/util';\r\n\r\nexport default {\r\n    components: {\r\n        CandidateBox: () => import('components/CandidateBox/main.vue'),\r\n    },\r\n    filters: {},\r\n    props: {},\r\n    data() {\r\n        return {\r\n            award: '',\r\n        };\r\n    },\r\n    computed: {\r\n        ...mapGetters([\r\n            'triggerOpenLucky',\r\n            'focusPrizeSN',\r\n            'focusCandidateSN',\r\n            'prizeList',\r\n\r\n            'candidateMapping',\r\n            'prizeMapping',\r\n        ]),\r\n        winnerCandidateList() {\r\n            const sns = this.focusCandidateSN; // 這是 SN 陣列 (e.g., ['sn1', 'sn2'])\r\n\r\n            if (!Array.isArray(sns) || sns.length === 0) {\r\n                return [];\r\n            }\r\n\r\n            // 透過 SN 陣列，查找對應的候選人物件，並排除找不到的項目 (filter(c => c))\r\n            return sns.map(sn => this.candidateMapping[sn]).filter(c => c);\r\n        },\r\n        focusPrizeInfo() {\r\n            return this.prizeMapping[this.focusPrizeSN] || false;\r\n        },\r\n    },\r\n    watch: {\r\n        // triggerOpenLucky: {\r\n        //     handler() {\r\n        //         const that = this;\r\n        //         $(that.$refs.box).modal('show');\r\n        //     },\r\n        // },\r\n    },\r\n    created() { },\r\n    mounted() {\r\n        // const that = this;\r\n        // $(that.$refs.box).bind('shown.bs.modal', () => {\r\n        //     /**\r\n        //      * 得獎 icon\r\n        //      */\r\n        //     that.setFavicon('award');\r\n        //     trackJS.mixpanel('LuckyOpen_click', { candidate_list: that.winnerCandidateList, prize: that.focusPrizeInfo });\r\n        //     trackJS.gtag('event', 'LuckyOpen_click', { candidate_list: that.winnerCandidateList, prize: that.focusPrizeInfo });\r\n        // });\r\n        // $(that.$refs.box).bind('hidden.bs.modal', () => {\r\n        //     /**\r\n        //      * default icon\r\n        //      */\r\n        //     that.setFavicon('default');\r\n        //     trackJS.mixpanel('LuckyClose_click');\r\n        //     trackJS.gtag('event', 'LuckyClose_click');\r\n        // });\r\n        // $(that.$refs.box).modal('show');\r\n    },\r\n    updated() { },\r\n    destroyed() { },\r\n    methods: {\r\n        ...mapActions({}),\r\n        ...mapMutations({\r\n            setFavicon: 'setFavicon',\r\n            setFocusCandidateBindPrize: 'setFocusCandidateBindPrize',\r\n        }),\r\n        save() {\r\n            const that = this;\r\n            const params = {\r\n                prize_sn: that.focusPrizeSN,\r\n                candidate_sn_list: that.focusCandidateSN, // 使用 focusCandidateSN (現在是 SN 陣列)\r\n            };\r\n\r\n            // 追踪數據需要更新，使用新的 winnerCandidateList\r\n            trackJS.mixpanel('LuckyConfirm_click', { candidate_list: that.winnerCandidateList, prize: that.focusPrizeInfo });\r\n            trackJS.gtag('event', 'LuckyConfirm_click', { candidate_list: that.winnerCandidateList, prize: that.focusPrizeInfo });\r\n\r\n            // 傳遞的參數結構變了，如果 setFocusCandidateBindPrize 期待的是單一 SN\r\n            that.setFocusCandidateBindPrize(params);\r\n            $(that.$refs.box).modal('hide');\r\n        },\r\n        cancel() {\r\n            const that = this;\r\n            // 【更新追蹤數據】\r\n            trackJS.mixpanel('LuckyCancel_click', { candidate_list: that.winnerCandidateList, prize: that.focusPrizeInfo });\r\n            trackJS.gtag('event', 'LuckyCancel_click', { candidate_list: that.winnerCandidateList, prize: that.focusPrizeInfo });\r\n        },\r\n    },\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped></style>","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./main.vue?vue&type=template&id=fc780428&scoped=true\"\nimport script from \"./main.vue?vue&type=script&lang=js\"\nexport * from \"./main.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"fc780428\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","ref","staticClass","attrs","id","tabindex","role","_m","_v","_s","winnerCandidateList","length","_l","winnerInfo","index","key","sn","domProps","textContent","focusPrizeInfo","title","type","on","click","cancel","save","_withStripped","components","CandidateBox","filters","props","data","award","computed","mapGetters","sns","focusCandidateSN","Array","isArray","map","candidateMapping","filter","c","prizeMapping","focusPrizeSN","watch","created","mounted","updated","destroyed","methods","mapActions","mapMutations","setFavicon","setFocusCandidateBindPrize","that","params","prize_sn","candidate_sn_list","trackJS","mixpanel","candidate_list","prize","gtag","$","$refs","box","modal"],"sourceRoot":""}