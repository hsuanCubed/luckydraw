"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[874],{3874:(t,e,i)=>{i.r(e),i.d(e,{default:()=>n});var a=function(){var t=this,e=t._self._c;return e("div",{ref:"box",staticClass:"modal",attrs:{id:"GetLuckyBox",tabindex:"-1",role:"dialog","data-backdrop":"static","data-keyboard":"false"}},[e("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[t._m(0),t._v(" "),e("div",{staticClass:"modal-body"},[t.needSetWebTitle?e("div",{staticClass:"alert alert-primary",staticStyle:{flex:"0 0 auto"},attrs:{role:"alert"}},[t._v("\n                    請先設定屬於您的抽獎活動名稱\n                    "),e("button",{staticClass:"btn btn-success btn-sm",on:{click:t.gotoSetWebTitle}},[t._v("立刻去")])]):t._e(),t._v(" "),e("div",{staticClass:"get-lucky-list",class:{disabled:t.needSetWebTitle}},[t.prizeListByAward.length>0?t._l(t.prizeListByAward,(function(i){return e("button",{key:i.prize_sn,staticClass:"btn btn-success btn-lg btn-block mb-3 prizeInfo",attrs:{type:"button",disabled:i.amount<=i.count},on:{click:function(e){return t.getLucky(i)}}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-9"},[t._v("\n                                    "+t._s(i.title)+" (每次"+t._s(i.drawCount||1)+"人)\n                                ")]),t._v(" "),e("div",{staticClass:"col-3"},[t._v("\n                                    ["+t._s(i.count)+" / "+t._s(i.amount)+"]\n                                ")])])])})):[e("h4",{staticClass:"text-center p-3"},[t._v("\n                            您尚未建立獎項，無法進行抽獎\n                        ")]),t._v(" "),e("button",{staticClass:"btn btn-warning btn-block btn-lg",on:{click:t.editPrizeList}},[t._v("\n                            建立獎項\n                        ")])]],2)])])])])};a._withStripped=!0;var s=i(1582),o=i(1551),l=i(4651);new Audio("./dist/mp3/ding.mp3"),new Audio("./dist/mp3/winner2.mp3");const r={components:{},filters:{},props:{},data:()=>({}),computed:{...(0,s.L8)(["config","triggerOpenGetLucky","prizeListByAward","candidateList","haveAwardCandidateSN","getLuckyWaitTimeArr"]),needSetWebTitle(){const t=this;let e=!1;return t.config.isTutorial||t.config.webTitle&&!["Lucky Draw","LuckyDraw","luckydraw"].includes(t.config.webTitle)||(e=!0),e}},watch:{triggerOpenGetLucky:{immediate:!0,handler(){const t=this;t.triggerOpenGetLucky?l(t.$refs.box).modal("show"):l(t.$refs.box).modal("hide")}}},created(){},mounted(){const t=this;l(t.$refs.box).bind("shown.bs.modal",(()=>{t.award="",o.Xe.mixpanel("GetLuckyOpen_click"),o.Xe.gtag("event","GetLuckyOpen_click")})),l(t.$refs.box).bind("hidden.bs.modal",(()=>{o.Xe.mixpanel("GetLuckyClose_click"),o.Xe.gtag("event","GetLuckyClose_click"),t.triggerModal({key:"GetLucky",close:!0})})),t.triggerOpenGetLucky?l(t.$refs.box).modal("show"):l(t.$refs.box).modal("hide")},updated(){},destroyed(){},methods:{...(0,s.PY)({setFavicon:"setFavicon",setFocusCandidateSN:"setFocusCandidateSN",setFocusPrizeSN:"setFocusPrizeSN",triggerModal:"triggerModal",setConfig:"setConfig",saveToLocalStorage:"saveToLocalStorage"}),...(0,s.i0)(["prepareLuckyDraw"]),gotoSetWebTitle(){const t=this;t.triggerModal({key:"GetLucky",close:!0});const e={offset:{top:60,bottom:60},startCallback(){o.Xe.mixpanel("TutorialStart_trigger",{type:"WebsiteTitle"}),o.Xe.gtag("event","TutorialStart_trigger",{type:"WebsiteTitle"})},closeCallback(){o.Xe.mixpanel("TutorialEnd_trigger",{type:"WebsiteTitle"}),o.Xe.gtag("event","TutorialEnd_trigger",{type:"WebsiteTitle"})},step_callback(t,e){o.Xe.mixpanel("TutorialStep_trigger",{type:"WebsiteTitle",index:e.index}),o.Xe.gtag("event","TutorialStep_trigger",{type:"WebsiteTitle",index:e.index})}},i=[{target:'#SettingBox input[name="webTitle"]',title:"獨特的抽獎",intro:"在抽獎前，設定一個屬於您的獨特抽獎活動名稱。",beforeAction(e,i,a){t.triggerModal({key:"Setting"}),setTimeout((()=>{a()}),500)}}];new o.FL(i,e).run()},editPrizeList(){l(this.$refs.box).modal("hide"),this.triggerModal({key:"PrizeList"})},async getLucky(t){console.log("--- 1. getLucky START ---"),o.Xe.mixpanel("GetLuckyChoosePrize_click",t),o.Xe.gtag("event","GetLuckyChoosePrize_click",t);const e=this.prepareLuckyDraw(t);console.log("--- 4. prepareLuckyDraw result:",e),!0===e&&this.triggerModal({key:"GetLucky",close:!0})}}},n=(0,i(2881).A)(r,a,[function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title"},[e("i",{staticClass:"fas fa-vote-yea"}),t._v("\n                    選取獎項\n                ")]),t._v(" "),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],!1,null,"b7454288",null).exports}}]);
//# sourceMappingURL=874.bundle.js.map?v=059337414ca62c58fe70